<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord Survey Platform</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>Developer Platform</h1>
            <p>Create custom surveys that will be sent via Discord DMs</p>
        </header>

        <section id="apiKeySection" class="section">
            <h2>Your API Key</h2>
            <div class="api-key-container">
                <input type="text" id="apiKey" readonly placeholder="Generate an API key to get started">
                <button onclick="generateApiKey()">Generate New Key</button>
                <button onclick="copyApiKey()">Copy</button>
            </div>
        </section>

        <section id="integrationTypeSection" class="section">
            <h2>Discord Bot Integration</h2>
            <p>Use our Discord bot to conduct surveys through Discord DMs:</p>
            <div class="integration-options">
                <div class="integration-option">
                    <h3>Discord Bot Features</h3>
                    <ul>
                        <li>Native Discord experience</li>
                        <li>Easy setup with bot invite</li>
                        <li>Real-time interactions</li>
                        <li>Secure and private messaging</li>
                        <li>Automated response handling</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="naturalLanguageSection" class="section">
            <h2>Natural Language Question Generation</h2>
            <p>Describe your survey questions in natural language and we'll convert them to structured questions.</p>
            
            <div class="natural-language-container">
                <textarea 
                    id="naturalLanguageInput" 
                    placeholder="Example: Create a customer feedback survey with 3 questions. First ask about their satisfaction level from 1-10. Then ask if they would recommend our service to others. Finally, ask them to choose their favorite feature from: Dashboard, Analytics, Reports, and Support."
                    rows="6"
                ></textarea>
                <button onclick="generateQuestionsFromDescription()" class="generate-btn">Generate Questions</button>
            </div>
            
            <div id="generatedQuestions" class="generated-questions hidden">
                <h3>Generated Questions</h3>
                <div id="questionsPreview" class="questions-preview"></div>
                <button onclick="useGeneratedQuestions()" class="use-questions-btn">Use These Questions</button>
            </div>
        </section>

        <section id="questionSection" class="section">
            <h2>Survey Questions</h2>
            <p>Or create questions manually:</p>
            <div id="questions">
                <!-- Questions will be added here -->
            </div>
            
            <button onclick="addQuestion()" class="add-question">Add Question</button>
            <button onclick="saveQuestions()" class="save-questions">Save Questions</button>
        </section>

        <section id="embedSection" class="section hidden">
            <h2>Generated Integration</h2>
            <p>Copy this code to embed the Discord survey widget:</p>
            <div class="code-container">
                <pre><code id="embedCode"></code></pre>
                <button onclick="copyEmbedCode()">Copy Code</button>
            </div>
            <div class="preview-container">
                <h3>Live Preview</h3>
                <div id="previewWidget"></div>
            </div>
        </section>

        <section id="integrationGuide" class="section">
            <h2>Integration Guide</h2>
            
            <div class="guide-section">
                <h3>1. Enable Developer Mode in Discord</h3>
                <ol>
                    <li>Open Discord</li>
                    <li>Go to User Settings (⚙️ next to your username)</li>
                    <li>Scroll down to "App Settings" and click on "Advanced"</li>
                    <li>Enable "Developer Mode"</li>
                </ol>
            </div>

            <div class="guide-section">
                <h3>2. Finding User IDs</h3>
                <p>To get a Discord User ID:</p>
                <ol>
                    <li>Right-click on a user's name or profile picture</li>
                    <li>Click "Copy ID" at the bottom of the menu</li>
                    <li>The ID will be copied to your clipboard</li>
                </ol>
                <div class="note">
                    User IDs are typically 17-20 digit numbers. Example: 756724128588759231
                </div>
            </div>

            <div class="guide-section">
                <h3>3. Setting Up the Bot</h3>
                <ol>
                    <li>Generate your API key above</li>
                    <li>Create your survey questions</li>
                    <li>Invite the bot to your Discord server</li>
                    <li>Make sure users have DMs enabled for the server</li>
                </ol>
                <div class="note">
                    The bot will automatically handle survey responses through Discord DMs
                </div>
            </div>

            <div class="guide-section">
                <h3>4. Testing</h3>
                <p>Before deploying to production:</p>
                <ol>
                    <li>Test the survey with your own Discord ID</li>
                    <li>Verify that you receive the questions in your DMs</li>
                    <li>Check that the response format works as expected</li>
                    <li>Test with different question types and formats</li>
                </ol>
            </div>

            <div class="guide-section">
                <h3>5. Troubleshooting</h3>
                <ul>
                    <li><strong>Not receiving DMs?</strong> Make sure you have DMs enabled for the server</li>
                    <li><strong>Invalid User ID?</strong> Double-check that Developer Mode is enabled and you're copying the correct ID</li>
                    <li><strong>Bot not responding?</strong> Verify the bot has proper permissions in your server</li>
                    <li><strong>Other issues?</strong> Check the server logs for any error messages</li>
                </ul>
            </div>
        </section>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html> 