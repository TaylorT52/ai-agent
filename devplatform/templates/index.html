<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord Survey Platform</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <div class="container">
        <header>
            <h1>Developer Platform</h1>
            <p>Create custom, embeddable webforms that will be sent via Discord DMs</p>
        </header>

        <section id="apiKeySection" class="section">
            <h2>Your API Key</h2>
            <div class="api-key-container">
                <input type="text" id="apiKey" readonly placeholder="Generate an API key to get started">
                <button onclick="generateApiKey()">Generate New Key</button>
                <button onclick="copyApiKey()">Copy</button>
            </div>
        </section>

        <section id="integrationTypeSection" class="section">
            <h2>Discord Bot Integration</h2>
            <p>Use our Discord bot to conduct surveys through Discord DMs:</p>
            <div class="integration-options">
                <div class="integration-option">
                    <h3>Discord Bot Features</h3>
                    <ul>
                        <li>Native Discord experience</li>
                        <li>Easy setup with bot invite</li>
                        <li>Real-time interactions</li>
                        <li>Secure and private messaging</li>
                        <li>Automated response handling</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="naturalLanguageSection" class="section">
            <h2>Natural Language Question Generation</h2>
            <p>Describe your survey questions in natural language and we'll convert them to structured questions.</p>

            <div class="natural-language-container">
                <textarea id="naturalLanguageInput"
                    placeholder="Example: Create a customer feedback survey with 3 questions. First ask about their satisfaction level from 1-10. Then ask if they would recommend our service to others. Finally, ask them to choose their favorite feature from: Dashboard, Analytics, Reports, and Support."
                    rows="6"></textarea>
                <button onclick="generateQuestionsFromDescription()" class="generate-btn">Generate Questions</button>
            </div>

            <div id="generatedQuestions" class="generated-questions hidden">
                <h3>Generated Questions</h3>
                <div id="questionsPreview" class="questions-preview"></div>
                <button onclick="useGeneratedQuestions()" class="use-questions-btn">Use These Questions</button>
            </div>
        </section>

        <section id="questionSection" class="section">
            <h2>Survey Questions</h2>
            <p>Or create questions manually:</p>
            <div id="questions">
                <!-- Questions will be added here -->
            </div>

            <button onclick="addQuestion()" class="add-question">Add Question</button>
            <button onclick="saveQuestions()" class="save-questions">Save Questions</button>
        </section>

        <section id="embedSection" class="section">
            <h2>Discord Integration</h2>
            <div class="guide-section">
                <h3>Integration Instructions</h3>
                <ol>
                    <li>Copy the code below and paste it into your website's HTML where you want the survey widget to
                        appear.</li>
                    <li>The widget will automatically connect to our Discord bot service - no setup required!</li>
                    <li>When users enter their Discord ID and click "Start Survey", they will receive the survey
                        questions via Discord DM from our bot.</li>
                </ol>
                <div class="note">
                    <strong>Note:</strong> Users must have DMs enabled to receive messages from our bot. Our bot will
                    automatically handle all survey interactions.
                </div>
            </div>

            <div class="code-container">
                <pre id="embedCode"></pre>
                <button onclick="copyEmbedCode()">Copy Code</button>
            </div>

            <div class="preview-container">
                <h3>Live Preview</h3>
                <div id="previewWidget"></div>
            </div>
        </section>

        <section id="integrationGuide" class="section">
            <h2>Integration Guide</h2>
            <h3>TODO: need info about getting survey responses back</h3>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>

</html>